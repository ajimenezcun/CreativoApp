---
interface Props {
  logos: Array<string>;
  speed?: number; // Duraci√≥n en segundos para completar un ciclo
}

const { logos, speed = 30 } = Astro.props;
---

<div class="logo-carousel">
  <div class="carousel-track">
    <!-- Primera serie de logos -->
    {logos.map((logo, index) => (
      <div class="carousel-item" key={`original-${index}`}>
        <img 
          src={logo} 
          alt={`Cliente ${index + 1}`}
          class="logo-image"
          loading="lazy"
        />
      </div>
    ))}
    <!-- Segunda serie de logos (duplicada para efecto infinito) -->
    {logos.map((logo, index) => (
      <div class="carousel-item" key={`duplicate-${index}`}>
        <img 
          src={logo} 
          alt={`Cliente ${index + 1}`}
          class="logo-image"
          loading="lazy"
        />
      </div>
    ))}
  </div>
</div>

<style define:vars={{ speed: `${speed}s` }}>
.logo-carousel {
  position: relative;
  width: 100%;
  height: 200px;
  margin-bottom: 4rem;
  overflow: hidden;
  mask-image: linear-gradient(
    to right,
    transparent 0%,
    black 10%,
    black 90%,
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to right,
    transparent 0%,
    black 10%,
    black 90%,
    transparent 100%
  );
}

.carousel-track {
  display: flex;
  gap: 50px;
  width: fit-content;
  animation: scroll var(--speed) linear infinite;
  will-change: transform;
}

@keyframes scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.carousel-item {
  flex: 0 0 auto;
  width: 200px;
  height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

.carousel-item:hover {
  transform: scale(1.05);
}

.logo-image {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  filter: grayscale(100%) brightness(0.8);
  transition: filter 0.3s ease;
}

.carousel-item:hover .logo-image {
  filter: grayscale(0%) brightness(1);
}


/* Responsive design */
@media (max-width: 768px) {
  .logo-carousel {
    height: 150px;
  }
  
  .carousel-item {
    width: 150px;
    height: 150px;
    padding: 0.5rem;
  }
}

@media (max-width: 480px) {
  .logo-carousel {
    height: 120px;
  }
  
  .carousel-item {
    width: 120px;
    height: 120px;
  }
}
</style>